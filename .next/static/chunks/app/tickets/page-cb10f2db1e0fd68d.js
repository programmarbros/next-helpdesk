(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{5740:(e,s,t)=>{Promise.resolve().then(t.bind(t,9481)),Promise.resolve().then(t.t.bind(t,6874,23))},9481:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var n=t(5155),l=t(2115),a=t(6874),i=t.n(a);function r(e){let{onSuccess:s}=e,[t,a]=(0,l.useState)(""),[r,c]=(0,l.useState)(""),[o,d]=(0,l.useState)("low"),[u,h]=(0,l.useState)(!1),[j,x]=(0,l.useState)(null),[m,v]=(0,l.useState)(!1),p=async e=>{e.preventDefault(),h(!0),x(null);try{let e=await fetch("http://localhost:4000/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,body:r,priority:o,user_email:"bowser@netninja.dev"})});if(201===e.status)v(!0),h(!1),setTimeout(()=>{s&&s()},1e4);else{let s=await e.json();x(s.message||"Failed to create ticket"),h(!1)}}catch(e){x("Network error. Please try again."),h(!1)}};return(0,n.jsx)("div",{children:m?(0,n.jsxs)("div",{className:"success center",children:["✅ Ticket created successfully!",(0,n.jsxs)("p",{children:["Go back to ",(0,n.jsx)(i(),{href:"/",children:"Dashboard."})]})]}):(0,n.jsxs)("form",{onSubmit:p,children:[j&&(0,n.jsx)("div",{className:"error",children:j}),(0,n.jsx)("h2",{className:"center",children:"Add a New Ticket"}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Title:"}),(0,n.jsx)("input",{required:!0,type:"text",onChange:e=>a(e.target.value),value:t})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Body:"}),(0,n.jsx)("textarea",{required:!0,onChange:e=>c(e.target.value),value:r})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{children:"Priority:"}),(0,n.jsxs)("select",{onChange:e=>d(e.target.value),value:o,children:[(0,n.jsx)("option",{value:"low",children:"Low Priority"}),(0,n.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,n.jsx)("option",{value:"high",children:"High Priority"})]})]}),(0,n.jsx)("button",{type:"submit",className:"btn-secondary",disabled:u,children:u?(0,n.jsx)("span",{children:"Adding..."}):(0,n.jsx)("span",{children:"Add Ticket"})})]})})}function c(){let[e,s]=(0,l.useState)(!1),t=()=>s(!1);return(0,l.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"button",onClick:()=>s(!0),children:"➕ Create"}),e&&(0,n.jsx)("div",{className:"modal",onClick:t,children:(0,n.jsx)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:(0,n.jsx)(r,{onSuccess:t})})})]})}}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=5740)),_N_E=e.O()}]);